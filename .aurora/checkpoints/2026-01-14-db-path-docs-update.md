# Checkpoint: Database Path Documentation Update

**Date**: 2026-01-14
**Session**: Database path error message and documentation improvements
**Status**: Completed

## Context

User encountered misleading error message when running `aur mem search "soar"` from home directory. The error suggested global database path (`~/.aurora/memory.db`) but Aurora uses project-local databases.

## Problem

1. Error message showed wrong path (`/home/hamr/.aurora/memory.db`)
2. Solutions section suggested generic path operations
3. Didn't explain project-local vs global distinction
4. Multiple documentation files were inconsistent about database location

## Changes Made

### 1. Error Message (`packages/cli/src/aurora_cli/commands/memory.py:404-425`)
**Before**: Generic "path not found" error with misleading solutions
**After**:
- Custom error message explaining project-local nature
- Solutions focused on `cd /path/to/project` and `aur init`
- Clear note that each project has its own `.aurora/memory.db`
- Removed mention of `aur mem index .` since `aur init` includes indexing

### 2. Project Documentation (`CLAUDE.md`)
- Reorganized CLI commands into "Setup" and "Usage" sections
- Added explicit warning about project-local database
- Updated Development section with initialization workflow

### 3. Knowledge Base (`docs/KNOWLEDGE_BASE.md`)
- Restructured File Locations into "Project-local" and "Global" sections
- Clarified that database is ALWAYS project-local
- Listed budget tracker as the only truly global file

### 4. Quick Start Guide (`docs/guides/QUICK_START.md`)
- Updated Step 4 to show `aur init` before `aur mem index .`
- Updated Configuration Files section
- Updated all workflow examples to include initialization
- Updated troubleshooting for database errors

## Key Insights

1. **`aur init` includes indexing** - Users only need one command, not two
2. **Only budget tracker is global** - Everything else is project-local
3. **Path resolution order**: Project `.aurora/` â†’ Global `~/.aurora/`
4. **Error messages matter** - Users rely on them for troubleshooting

## Files Modified

```
packages/cli/src/aurora_cli/commands/memory.py
CLAUDE.md
docs/KNOWLEDGE_BASE.md
docs/guides/QUICK_START.md
```

## Testing Needed

- [ ] Verify new error message displays correctly
- [ ] Test `aur mem search` from non-project directory
- [ ] Verify `aur init` creates proper structure
- [ ] Check that documentation is consistent across all files

## Follow-up Questions

User asked about `.benchmarks` folder:
- **Answer**: Created by pytest-benchmark (testing framework), not by `aur init`
- Safe to ignore/delete, regenerated by tests
- Should be in `.gitignore`

## Related Code

Database path resolution in `packages/core/src/aurora_core/paths.py`:
- `get_aurora_dir()` - Checks `./.aurora` then `~/.aurora`
- `get_db_path()` - Returns `{aurora_dir}/memory.db`
- `get_budget_tracker_path()` - ALWAYS `~/.aurora/budget_tracker.json`

## Session Summary

Successfully updated error messages and documentation to clearly communicate that:
1. Database is project-local at `.aurora/memory.db`
2. Must run `aur init` in project directory
3. Global directory only used for budget tracking
4. Error messages now guide users to correct workflow
