# Data Schemas: {{ plan_name | title }}

**Plan ID**: `{{ plan_id }}`
**Capability**: Schemas
**Created**: {{ created_at }}

---

## Overview

This document specifies the data schemas and models for this plan.

## Core Schemas

### Plan Schema

```json
{
  "plan_id": "{{ plan_id }}",
  "goal": "{{ goal }}",
  "status": "active | completed | archived",
  "complexity": "low | medium | high",
  "created_at": "ISO 8601 timestamp",
  "updated_at": "ISO 8601 timestamp",
  "archived_at": "ISO 8601 timestamp (optional)",
  "subgoals": [
    {
      "id": "sg-N",
      "title": "string",
      "description": "string",
      "recommended_agent": "@agent-name",
      "status": "pending | in_progress | completed | blocked",
      "dependencies": ["sg-1", "sg-2"]
    }
  ],
  "tags": ["tag1", "tag2"],
  "metadata": {}
}
```

### Subgoal Schema

```typescript
interface Subgoal {
  id: string;              // Format: sg-N
  title: string;           // 10-100 chars
  description: string;     // 20-500 chars
  recommended_agent: string;        // Format: @agent-name
  status: SubgoalStatus;
  dependencies: string[];  // Array of subgoal IDs
}

enum SubgoalStatus {
  pending = "pending",
  in_progress = "in_progress",
  completed = "completed",
  blocked = "blocked"
}
```

---

## Domain-Specific Schemas

{% if domain_schemas %}
{% for schema in domain_schemas %}
### {{ schema.name }}

```{{ schema.language | default('json') }}
{{ schema.definition }}
```

**Description**: {{ schema.description }}

**Validation Rules**:
{% for rule in schema.validation_rules %}
- {{ rule }}
{% endfor %}

{% endfor %}
{% else %}
No domain-specific schemas defined yet. Add as needed during implementation.
{% endif %}

---

## Data Flow

### Inputs
{% if inputs %}
{% for input in inputs %}
- **{{ input.name }}**: {{ input.description }} ({{ input.type }})
{% endfor %}
{% else %}
- User-provided goal text
- Agent assignments
{% endif %}

### Outputs
{% if outputs %}
{% for output in outputs %}
- **{{ output.name }}**: {{ output.description }} ({{ output.type }})
{% endfor %}
{% else %}
- Generated plan files (8 total)
- Updated manifest.json
{% endif %}

---

## Validation Constraints

### Field Constraints

| Field | Type | Min | Max | Pattern | Required |
|-------|------|-----|-----|---------|----------|
| plan_id | string | 10 | 50 | `^\d{4}-[a-z0-9-]+$` | Yes |
| goal | string | 10 | 500 | - | Yes |
| recommended_agent | string | 3 | 50 | `^@[a-z0-9-]+$` | Yes |
| subgoal.id | string | 4 | 10 | `^sg-\d+$` | Yes |

### Business Rules

{% if business_rules %}
{% for rule in business_rules %}
- {{ rule }}
{% endfor %}
{% else %}
- Plan ID must be unique across active and archived plans
- Subgoal dependencies must not form cycles
- Agent IDs must reference known agents (optional validation)
- Status transitions must follow allowed state machine
{% endif %}

---

## Schema Versioning

**Current Version**: 1.0
**Breaking Changes**: None yet

Future versions will be tracked here with migration guides.

---

*Generated by Aurora Planning System v0.1.0*
