# Validation Rules: {{ plan_name | title }}

**Plan ID**: `{{ plan_id }}`
**Capability**: Validation
**Created**: {{ created_at }}

---

## Overview

This document specifies validation rules and quality gates for this plan.

## Plan Structure Validation

### Required Files
- [ ] `plan.md` - High-level decomposition
- [ ] `prd.md` - Detailed requirements
- [ ] `tasks.md` - Implementation checklist
- [ ] `agents.json` - Machine metadata
- [ ] `specs/{{ plan_id }}-planning.md` - Planning capability
- [ ] `specs/{{ plan_id }}-commands.md` - Command schemas
- [ ] `specs/{{ plan_id }}-validation.md` - Validation rules (this file)
- [ ] `specs/{{ plan_id }}-schemas.md` - Data schemas

### Metadata Validation
- **Plan ID Format**: Must match `NNNN-slug` pattern
- **Agent IDs**: Must match `@agent-name` pattern
- **Subgoal IDs**: Must match `sg-N` pattern
- **Dependencies**: Must reference valid subgoal IDs
- **Status Values**: Must be one of: pending, in_progress, completed, blocked, archived

---

## Functional Requirements Validation

{% for subgoal in subgoals %}
### {{ subgoal.id | upper }}: {{ subgoal.title }}

**Validation Criteria**:
{% for criterion in subgoal.get('validation_criteria', []) %}
- {{ criterion }}
{% else %}
- Implementation matches requirements in prd.md
- Tests written and passing
- Code reviewed
{% endfor %}

**Test Scenarios**:
{% for scenario in subgoal.get('test_scenarios', []) %}
- {{ scenario }}
{% else %}
- Happy path scenario
- Error handling scenario
- Edge cases covered
{% endfor %}

{% endfor %}

---

## Quality Gates

### Code Quality
- [ ] Linting passes (ruff/pylint)
- [ ] Type checking passes (mypy)
- [ ] Code coverage â‰¥ 80%
- [ ] No critical security issues (bandit)

### Testing
- [ ] Unit tests written for all functions
- [ ] Integration tests for workflows
- [ ] Acceptance tests for user scenarios
- [ ] Performance benchmarks meet targets

### Documentation
- [ ] Code documented (docstrings)
- [ ] README updated
- [ ] API reference generated
- [ ] Examples provided

---

## Acceptance Criteria

### Definition of Done

This plan is considered complete when:

{% if acceptance_criteria %}
{% for criterion in acceptance_criteria %}
- [ ] {{ criterion }}
{% endfor %}
{% else %}
- [ ] All tasks in tasks.md marked as complete
- [ ] All functional requirements implemented
- [ ] All tests passing
- [ ] Code reviewed and approved
- [ ] Documentation complete
- [ ] No critical bugs
{% endif %}

---

## Validation Commands

```bash
# Run all quality checks
pytest tests/ --cov
ruff check .
mypy .
bandit -r .

# Verify plan structure
aur plan view {{ plan_id }}

# Check task completion
grep -c "\[x\]" .aurora/plans/active/{{ plan_id }}/tasks.md
```

---

*Generated by Aurora Planning System v0.1.0*
